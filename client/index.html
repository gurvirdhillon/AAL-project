<!DOCTYPE html>
<head>
    <title>Ambient assisted living</title>
    <script src="reminder.js"></script>
        <script src="index.js"></script>
        <script src="panic.mjs"></script>
        <script src="app.js"></script>
        <script src="settings.js"></script>
        <!-- <script defer src="chat.js"></script> -->
        <script src="chat.js"></script>
        <script src="medication.js" type="module"></script>
        <script src="https://www.twilio.com/libs/twilio/2.0.0/twilio.min.js"></script>
        <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
          <link rel="stylesheet" href="index.css">
</head>
<body>

<div>
<h1>ElderAAL</h1>
<input type="search" placeholder="search" class="searchEngine" id="searchInput">
<input type="button" value="🎙️" class="searchEngine" id="microphone">
<input type="submit" value="🔎" class="searchEngine" id="searchSubmit">

<button id="login">Login</button>
<button id="logout">Logout</button>
</div>

<div class="greetingsPage">
<h2 id="greeting">Welcome</h2>
</div>

<nav id="headerNavigator">
    <button class="navChild" id="reminder">Remind Me</button>
    <button class="navChild" id="meds">Medication</button>
    <!-- <button class="navChild" id="home">Home</button> -->
    <button class="navChild" id="UA">User Activity</button>
    <button class="navChild" id="chatSystem">Chat</button>
    <button class="navChild" id="settings">Settings</button>
</nav>

<div id="pageStart">
<img src="./img/elderly-technology.jpg" alt="elderly people using technology" id="startingPage" class="startingImg">
</div>

<article>

</article>

<footer>
  <input id="panicBtn" type="submit" value="PANIC">
</footer>

</body>

<script>

// window.addEventListener("load", function() {
//     const chk = document.getElementById('chk');
//     if (chk) {
//         chk.addEventListener('change', () => {
//             const getBody = document.querySelector('body');
//             getBody.classList.toggle('dark');
//         });
//     }
// });

const getInput = document.querySelector('#reminderInput');
const reminderDate = document.querySelector('#reminderDate');
const getSubmit = document.querySelector('#submitBtn');
const targetContent = document.querySelector('#createList');
const getForm = document.querySelector('#reminderFrm');

let savedReminders = localStorage.getItem('reminders');
if(savedReminders){
  targetContent.textContent = savedReminders;
}

if(getForm) {
  getForm.addEventListener('submit', (e) => {
    e.preventDefault();
    const context = getInput.value;
    const date = reminderDate.value;
    reminderInput.value = '';
    reminderDate.value = '';

    const giveList = document.createElement('li');
    giveList.className = 'list-group-item';
    giveList.textContent = `Reminder to: ${context} at ${date}`;
    targetContent.appendChild(giveList);
    const getDate = document.createElement('span');
    getDate.classList.add('reminderDate');
    giveList.appendChild(getDate);
    localStorage.setItem('reminders', targetContent.textContent);
  
    const del = document.createElement('button');
    del.classList.add('delete');
    del.textContent = '-';
    giveList.appendChild(del);
    del.addEventListener('click', (e) => {
      e.target.parentNode.remove();
      localStorage.setItem('reminders', targetContent.textContent);
    });
  });
}

const getMsgForm = document.querySelector('#msgForm');
const input = document.querySelector('#inputBar');
const sendMsg = document.querySelector('#sendMsg');
const displayMessages = document.querySelector('#showMessages');

// prevent the default of the event

function getMessageOnScreen(e) {
  e.preventDefault();
  const msg = input.value;
  const makeMsg = document.createElement('p');
  makeMsg.classList.add('userMsg');
  makeMsg.textContent = msg;
  displayMessages.appendChild(makeMsg);
  input.value = '';
}

getMsgForm.addEventListener('submit', getMessageOnScreen);

</script>
