<!DOCTYPE html>
<head>
    <title>Ambient assisted living</title>
    <!-- <script src="reminder.js"></script> -->
        <script src="index.js"></script>
        <script src="panic.mjs"></script>
        <script src="app.js"></script>
        <script src="settings.js"></script>
        <!-- <script defer src="chat.js"></script> -->
        <script src="chat.js"></script>
        <script src="medication.js" type="module"></script>
        <script src="https://www.twilio.com/libs/twilio/2.0.0/twilio.min.js"></script>
        <script src="https://cdn.auth0.com/js/auth0-spa-js/1.13/auth0-spa-js.production.js"></script>
          <link rel="stylesheet" href="index.css">
</head>
<body>

<div>
<h1>ElderAAL</h1>
<input type="search" placeholder="search" class="searchEngine" id="searchInput">
<input type="button" value="🎙️" class="searchEngine" id="microphone">
<input type="submit" value="🔎" class="searchEngine" id="searchSubmit">

<button id="login">Login</button>
<button id="logout">Logout</button>
</div>

<div class="greetingsPage">
<h2 id="greeting">Welcome</h2>
</div>

<nav id="headerNavigator">
    <button class="navChild" id="home">Home</button>
    <button class="navChild" id="reminder">Remind Me</button>
    <button class="navChild" id="meds">Medication</button>
    <!-- <button class="navChild" id="home">Home</button> -->
    <button class="navChild" id="UA">User Activity</button>
    <button class="navChild" id="chatSystem">Chat</button>
    <button class="navChild" id="settings">Settings</button>
</nav>

<div id="medicationReminder">

    <h1>Medication reminder:</h1>
    <form id="medicationFrm">
          <label>Medication reminder: </label>
          <input placeholder="Enter medication name" id="medicationInput" required>
          <p></p>
          <label>Amount: </label>
          <input placeholder="e.g 2 pills" id="medicationDosage" required>
          <p></p>
          <label>Consumption method: </label>
          <select id="consumptionMethod">
            <option>Pills</option>
            <option>Drops</option>
            <option>Injection</option>
            <option>Inhaler</option>
            <option>Spray</option>
            <option>Cream</option>
            <option>Patch</option>
            <option>Other</option>
          </select>
          <p></p>
          <label>Dosage: </label>
            <input placeholder="40mg" id="medicationStrength" type="number" min="0" required>
            <select id="medicationDosage">
                <option value="mg">mg</option>
                <option value="ml">ml</option>
                <option value="%">%</option>
                <option value="units">units</option>
            </select>
            <p></p>
            <label>Frequency: </label>
            <select>
              <option>Once a day</option>
              <option>Twice a day</option>
  <!-- need to review how i would handle this  -->
            </select>
          <p></p>
            <label>Time reminder: </label>
          <input type="time" id="medicationTime" required>
            <p></p>
          <button type="submit" id="submitBtn">Set Reminder</button>
        </form>
        <ul id="medicationList"></ul>
      </div>

<footer>
    <input id="panicBtn" type="submit" value="PANIC">
</footer>

</body>

<script>
  const reminderBtn = document.querySelector('#reminder');
      if (reminderBtn) {
        reminderBtn.addEventListener('click', function() {
          window.location.href = 'reminder.html';
    });
}

const medsBtn = document.querySelector('#meds');
      if (medsBtn) {
        medsBtn.addEventListener('click', function() {
          window.location.href = 'medication.html';
    });
}

const chatClicked = document.querySelector('#chatSystem');
if(chatClicked) {
  chatClicked.addEventListener('click', function() {
    window.location.href = 'chat.html';
  });
}

const buttonStngs = document.querySelector('#settings');
if(buttonStngs) {
  buttonStngs.addEventListener('click', function() {
    window.location.href = 'settings.html';
  });
}

const homeBtn = document.querySelector('#home');
      if (homeBtn) {
        homeBtn.addEventListener('click', function() {
          window.location.href = 'index.html';
    });
}

const UAbtn = document.querySelector('#UA');
      if (UAbtn) {
        UAbtn.addEventListener('click', function() {
          window.location.href = 'activity.html';
    });
}

// const input = document.querySelector('#medicationInput');
// const form = document.querySelector('#medicationFrm');
// const dosage = document.querySelector('#medicationDosage');
// const strength = document.querySelector('#medicationStrength');

// const medicationList = document.querySelector('#medicationList');

// if(form){
// form.addEventListener('submit', function(event){
//     event.preventDefault();
//     const value = input.value;
//     if(!value){
//         return;
//     }
//   localStorage.setItem('medicationInput', value);
//   localStorage.setItem('medicationDosage', dosage.value);
//   localStorage.setItem('medicationStrength', strength.value);
//     const reminders = JSON.parse(localStorage.getItem('reminders')) || [];
//     reminders.push({
//         medication: value,
//         dosage: dosage.value,
//         strength: strength.value,
//         time: document.querySelector('#medicationTime').value
//     });
//     const medTime = document.querySelector('#medicationTime').value;
//     const time = new Date();
//     time.setHours(medTime.split(':')[0]);
//     time.setMinutes(medTime.split(':')[1]);
//     if (Notification.permission !== "granted") {
//         Notification.requestPermission();
//     }
//     setTimeout(function(){
//         new Notification(value +  " medication reminder");
//     }, 
//     time - new Date());
//     const makeList = document.createElement('li');
//     makeList.textContent = "medication reminder: " + value + ' to be consumed at ' + document.querySelector('#medicationTime').value;
//     medicationList.appendChild(makeList);
//     // get the id of medicationlist to stay on the page after it refreshes
//     // localStorage.setItem('medicationList', medicationList.id);
//     localStorage.setItem('reminders', JSON.stringify(reminders));
//     input.value = '';

//   });
// };

// window.addEventListener('load', function () {
//   input.value = localStorage.getItem('medicationInput') || ' ';
//   dosage.value = localStorage.getItem('medicationDosage') || ' ';
//   strength.value = localStorage.getItem('medicationStrength') || ' ';
//   // stores the users reminders in local storage
  
//   const reminders = JSON.parse(localStorage.getItem('reminders')) || [];
//   reminders.forEach(function(reminder){
//     const item = document.createElement('li');
//     item.textContent = reminder.medication + ' at ' + reminder.time;
//     medicationList.appendChild(item);
//     localStorage.setItem('medicationList', medicationList.id);
//   });
// });

</script>
